<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¯/ Ø²ÙŠÙ†Ø¨ Ø¬Ø§Ø¨Ø± - Ù…Ø­Ø§Ø³Ø¨Ø© 2</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Cairo', sans-serif;
    background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
    color: white;
    text-align: center;
}
.container {
    background: rgba(255,255,255,0.1);
    padding: 30px;
    border-radius: 20px;
    width: 350px;
    margin: 50px auto;
    backdrop-filter: blur(10px);
}
input, select {
    width: 90%;
    padding: 10px;
    margin: 10px;
    border-radius: 10px;
    border: none;
}
button {
    padding: 10px 20px;
    border-radius: 20px;
    border: none;
    background: #8e2de2;
    color: white;
    cursor: pointer;
}
.card {
    margin-top: 20px;
    padding: 15px;
    background: #1e1e3f;
    border-radius: 15px;
    display: none;
}
</style>
</head>

<body>

<img src="logo.png.jpeg" width="150">

<div class="container">
<h2>Ø­Ø¬Ø² ÙƒÙˆØ±Ø³ Ù…Ø­Ø§Ø³Ø¨Ø© 2</h2>

<input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
<input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">

<select id="time">
<option value="">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ¹Ø¯</option>
<option>Ø§Ù„Ø£Ø­Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø© 3</option>
<option>Ø§Ù„Ø£Ø­Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø© 6</option>
<option>Ø§Ù„Ø§Ø«Ù†ÙŠÙ† Ø§Ù„Ø³Ø§Ø¹Ø© 5</option>
</select>

<button onclick="submitForm()">ØªØ³Ø¬ÙŠÙ„</button>

<div class="card" id="resultCard">
<h3>ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­ ğŸš€</h3>
<p>Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:</p>
<h2 id="studentCode"></h2>
</div>
</div>

<script>

async function submitForm() {

    let name = document.getElementById("name").value.trim();
    let phone = document.getElementById("phone").value.trim();
    let time = document.getElementById("time").value;

    // Validation
    if (!name || !phone || !time) {
        alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù…Ù„Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        return;
    }

    if (phone.length !== 11 || isNaN(phone)) {
        alert("Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­");
        return;
    }

    try {

        let response = await fetch("https://script.google.com/macros/s/AKfycbzFDK3HyLltmnsmlHynUwjCK2vQ5PlUqXUDOyLtNMYjNiJ2V97kbF6CKMFqCTxYTWE4/exec", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ name, phone, time })
        });

        let result = await response.text();

        if (result === "PHONE_EXISTS") {
            alert("Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ù‹Ø§");
            return;
        }

        if (result === "NAME_EXISTS") {
            alert("Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ù‹Ø§");
            return;
        }

        document.getElementById("studentCode").innerText = result;
        document.getElementById("resultCard").style.display = "block";

    } catch (error) {
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±");
        console.error(error);
    }
}

</script>

</body>
</html>
